<html>

<button onclick="myFunction()">Delete</button>
<button onclick="myFunction1()">Circle</button>
<input type="file" accept='.svg' id="file-input" />

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 200" onload="makeDraggable(evt)">
  <rect width="300" height="300" fill="#eee"></rect>
  <circle class="draggable" id="costy" cx="100" cy="100" r="30"></circle>

</svg>


<script type="text/javascript">


//-----initialise variables--------------------------------
var SVG_TARGET_ELEMENT = "costy";
var nIndex=0;
var selectedElement = false;
var svg;

//########## when click "Circle" button >>> create new element

function myFunction1(){
nIndex++;
var element = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
svg.appendChild(element);
element.setAttributeNS(null, 'cx', 100);
element.setAttributeNS(null, 'cy', 100);
element.setAttributeNS(null, 'r', 30);
element.setAttributeNS(null, 'id', "costy"+nIndex);
element.setAttributeNS(null, 'class', "draggable");
}

//delete element
function myFunction(){
var element = document.getElementById(SVG_TARGET_ELEMENT);
svg.removeChild(element);
}



function makeDraggable(evt) {
  svg = evt.target;
  svg.addEventListener('mousedown', startDrag);
  svg.addEventListener('mousemove', drag);
  svg.addEventListener('mouseup', endDrag);
  svg.addEventListener('mouseleave', endDrag);
     function startDrag(evt) {
       if (evt.target.classList.contains('draggable')) {
          selectedElement = evt.target;
          SVG_TARGET_ELEMENT=selectedElement.id;
          console.log(selectedElement.id);}}

     function drag(evt) {
       if (selectedElement) {
          evt.preventDefault();
          var coord = getMousePosition(evt);
          selectedElement.setAttributeNS(null, "cx", coord.x);
          selectedElement.setAttributeNS(null, "cy", coord.y);}}
  
    function endDrag(evt) {
       selectedElement = null;}
}

function getMousePosition(evt) {
  var CTM = svg.getScreenCTM();
  return {
    x: (evt.clientX - CTM.e) / CTM.a,
    y: (evt.clientY - CTM.f) / CTM.d
  };
}


function readSingleFile(e) {
  var file = e.target.files[0];
  if (!file) {
    return;
  }
  var reader = new FileReader();
  reader.onload = function(e) {
    var contents = e.target.result;
    alert(contents);
    //displayContents(contents);
  };
  reader.readAsText(file);
}
//quando event "change" 
document.getElementById('file-input')
  .addEventListener('change', readSingleFile, false);

</script>
</html>
