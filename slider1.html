<html>




<input id="slider-x" type="range" min="1" max="160" value="20" oninput="moveSlider(this, 'cx')"><br>
<input id="slider-y" type="range" min="1" max="140" value="10" oninput="moveSlider(this, 'cy')"><br>
<input id="slider-z" type="range" min="1" max="140" value="10" oninput="moveSlider(this, 'r')"><br>
<button onclick="myFunction()">Delete</button>
<button onclick="myFunction1()">Circle</button>



<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 200" onload="makeDraggable(evt)">
  <rect width="300" height="300" fill="#eee"></rect>
  <circle class="draggable" id="costy" cx="100" cy="100" r="30"></circle>

</svg>


<script type="text/javascript">
var svg = document.getElementsByTagName('svg')[0];
var SVG_TARGET_ELEMENT = "costy";
var nIndex=0;
var selectedElement = false;


function myFunction1(){
nIndex++;
var element = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
svg.appendChild(element);
//get attributes
//var y = parseFloat(element.getAttributeNS(null, 'y'));
//set attributes
//element.setAttributeNS(null, 'cy', y + 10);
element.setAttributeNS(null, 'cx', 100);
element.setAttributeNS(null, 'cy', 100);
element.setAttributeNS(null, 'r', 30);
element.setAttributeNS(null, 'id', "costy"+nIndex);
element.setAttributeNS(null, 'class', "draggable");

}
function myFunction(){
var element = document.getElementById(SVG_TARGET_ELEMENT);
svg.removeChild(element);

}

var moveSlider = function(slider, direction) {
	var value = slider.value;
	var circle = document.getElementById(SVG_TARGET_ELEMENT);
	circle.setAttributeNS(null, direction, value);
}

function makeDraggable(evt) {
  var svg = evt.target;
  svg.addEventListener('mousedown', startDrag);
  svg.addEventListener('mousemove', drag);
  svg.addEventListener('mouseup', endDrag);
  svg.addEventListener('mouseleave', endDrag);

  function startDrag(evt) {

if (evt.target.classList.contains('draggable')) {
    selectedElement = evt.target;
console.log(selectedElement);
  }
  }
  function drag(evt) {
 if (selectedElement) {
    evt.preventDefault();
    var coord = getMousePosition(evt);
    selectedElement.setAttributeNS(null, "cx", coord.x);
    selectedElement.setAttributeNS(null, "cy", coord.y);

    //var x = parseFloat(selectedElement.getAttributeNS(null, "cx"));
    //selectedElement.setAttributeNS(null, "cx", x +1);
  }

  }
  function endDrag(evt) {
selectedElement = null;
  }
}

function getMousePosition(evt) {
  var CTM = svg.getScreenCTM();
  return {
    x: (evt.clientX - CTM.e) / CTM.a,
    y: (evt.clientY - CTM.f) / CTM.d
  };
}

</script>
</html>
